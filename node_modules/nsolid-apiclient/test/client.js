'use strict'

const test = require('tape')

const Client = require('../')

test('construction', (t) => {
  var c
  c = Client('localhost:3000')
  t.ok(c instanceof Client)
  t.equal(c.endpoint, 'https://localhost:3000/api/v1/')
  c = new Client('foo.bar.com:3000')
  t.ok(c instanceof Client)
  t.equal(c.endpoint, 'https://foo.bar.com:3000/api/v1/')
  c = Client('localhost', 'v1')
  t.ok(c instanceof Client)
  t.equal(c.endpoint, 'https://localhost/api/v1/')
  c = Client('nodesource.com', 1)
  t.ok(c instanceof Client)
  t.equal(c.endpoint, 'https://nodesource.com/api/v1/')
  c = new Client('localhost', 1)
  t.ok(c instanceof Client)
  t.equal(c.endpoint, 'https://localhost/api/v1/')
  c = new Client('nodesource.com:80', 'v1')
  t.ok(c instanceof Client)
  t.equal(c.endpoint, 'https://nodesource.com:80/api/v1/')

  t.throws(() => { Client('localhost:3000', 2) }, new Error('Only v1 of the API is currently supported'))

  t.end()
})
